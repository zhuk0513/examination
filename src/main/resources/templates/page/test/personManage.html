<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <base th:href="@{/}">
    <link rel="stylesheet" href="scripts/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="stylesheet/css/main.css">

    <script src="scripts/jquery.min.js"></script>
    <script src="scripts/vue/vue.js"></script>
    <script src="scripts/element-ui/lib/index.js"></script>
    <script src="scripts/ajax.js"></script>
</head>
<body>
<div id="personManage" v-cloak >
    <el-row>
        <el-table
                :data="person"
                style="width: 100%;height: 800px">
            <el-table-column
                    prop="name"
                    label="姓名"
                    width="180">
            </el-table-column>
            <el-table-column
                    prop="age"
                    label="年龄">
            </el-table-column>
            <el-table-column label="操作">
                <template slot-scope="scope">
                    <el-button
                            size="mini"
                            @click="editRow(scope.row)">编辑
                    </el-button>
                    <el-button
                            size="mini"
                            type="danger"
                            @click="deleteRow(scope.row)">删除
                    </el-button>
                </template>
            </el-table-column>
        </el-table>
    </el-row>
</div>
</body>
<script th:inline="javascript">
    let path=[[${#httpServletRequest.getContextPath()}]];
</script>
<script>
    let personManageVm=new Vue({
        el:'#personManage',
        data:{
            person:[],
            srcUrl:''
        },
        mounted(){
            this.init();
        },
        methods:{
            init(){
                ajax(path+'/test/getTest','post','',function (res) {
                    if(res.code==1){
                        personManageVm.person=res.result;
                    }else{
                        alert(res.msg);
                    }
                });
            },
            editRow(row){
                personManageVm.$message({showClose: true, message: row.name, type: 'success'});
            },
            deleteRow(row){
                personManageVm.$message({showClose: true, message: row.name, type: 'success'});
            }
        }
    });
</script>
</html>
